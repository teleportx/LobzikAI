<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Markdown Preview — Dark Theme</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.7/dist/purify.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/highlight.min.js"></script>
  <style>
    :root{--bg:#0b0e14;--panel:#111520;--text:#e6e6e6;--muted:#9aa4b2;--brand:#7aa2f7;--border:#23283a;--code-bg:#0d1117;--radius:14px;--font-ui:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    *{box-sizing:border-box}html,body{height:100%}body{margin:0;background:radial-gradient(800px 600px at 10% -10%, rgba(122,162,247,.09), transparent),var(--bg);color:var(--text);font-family:var(--font-ui);line-height:1.6;padding:28px}
    .card{max-width:1100px;margin:0 auto;background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;padding:22px}
    .meta{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#8bd5ca)}
    h1{font-size:20px;margin:0}
    .muted{color:var(--muted);font-size:13px}

    .preview{padding:8px 2px 18px 2px}
    .preview h1{font-size:2rem;margin-top:1rem}
    .preview h2{font-size:1.5rem}
    .preview p{margin:.6em 0}
    .preview a{color:var(--brand)}
    .preview blockquote{border-left:3px solid var(--brand);padding:.5em 1em;background:rgba(122,162,247,.03);border-radius:8px}
    .preview code{font-family:ui-monospace,Menlo,Monaco,Consolas,monospace;padding:.12em .35em;border-radius:6px;background:rgba(255,255,255,.04)}
    .preview pre{background:var(--code-bg);padding:12px;border-radius:10px;border:1px solid var(--border);overflow:auto}
    .preview table{width:100%;border-collapse:collapse;margin:1em 0}
    .preview th,.preview td{border:1px solid var(--border);padding:.5em .6em}
    .preview img{max-width:100%;border-radius:8px;border:1px solid var(--border)}

    @media (max-width:720px){body{padding:14px}.card{padding:14px} .preview h1{font-size:1.4rem}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <article id="preview" class="preview" aria-live="polite"></article>
  </div>

  <script>
    // == Настройка: поместите сюда ваш Markdown в переменную MARKDOWN ==
    const MARKDOWN = `# Aboba`;


    // Marked + DOMPurify + highlight.js
    marked.setOptions({ gfm: true, breaks: true, headerIds: true, mangle: false, smartLists: true, highlight: (code, lang) => {
      try { if(lang && hljs.getLanguage(lang)) return hljs.highlight(code, {language:lang}).value } catch(_) {}
      try { return hljs.highlightAuto(code).value } catch(_) { return code }
    }});

    const preview = document.getElementById('preview');

    function render(md){
      const html = marked.parse(md);
      const clean = DOMPurify.sanitize(html, { USE_PROFILES: { html: true } });
      preview.innerHTML = clean;
      // ссылки в новом окне
      preview.querySelectorAll('a[href]').forEach(a => { a.target = '_blank'; a.rel = 'noopener noreferrer nofollow' });
      // подсветка
      preview.querySelectorAll('pre code').forEach(el => hljs.highlightElement(el));
    }

    // Рендерим MARKDOWN сразу
    render(MARKDOWN);

    // Экспорт: удобно менять MARKDOWN извне (например, из devtools)
    window.setMarkdown = (md) => { render(md); };
    window.getHtml = () => preview.innerHTML;
  </script>
</body>
</html>
